(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;$.Define($$,{YC:{Web:{BioGraphClient:{MainForm:$.Field(function(){var J,K,R,S,T,U,V,W,X,_7,_8,_9,_,ba,bb,be,bf,bg,bh,bi,bj,bM,bN;J=b.Do();K=J.Delay(function(){var M,O;M=function(N){return[N,h.Sync("YC.Web:5",[{$:1},N])];};O=h.Sync("YC.Web:4",[{$:1}]);return J.Bind(f.InputAreaControl("Grammar",i.map(M,O)),function(P){return J.Bind(f.RangeControl("String Range","Min","Max"),function(Q){return J.Return([P,Q]);});});});R=b.Vertical(K);S=k.get_Default();T={$:1,$0:"tomiddle"};U=$.New(k,{Header:S.Header,Padding:S.Padding,Description:S.Description,BackgroundColor:S.BackgroundColor,BorderColor:S.BorderColor,CssClass:T,Style:S.Style});V=j.WithCustomFormContainer(U,R);W=b.Do();X=W.Delay(function(){var Z,_1;Z=function(_0){return[_0,h.Sync("YC.Web:5",[{$:0},_0])];};_1=h.Sync("YC.Web:4",[{$:0}]);return W.Bind(f.InputAreaControl("Graph",i.map(Z,_1)),function(_2){var _3,_4,_5;_3=l.Checkbox(false);_4=j.WithTextLabel("Draw Graph",_3);_5=j.WithLabelLeft(_4);return W.Bind(j.WithFormContainer(_5),function(_6){return W.Return([_2,_6]);});});});_7=b.Vertical(X);_8=k.get_Default();_9={$:1,$0:"tomiddle"};_=$.New(k,{Header:_8.Header,Padding:_8.Padding,Description:_8.Description,BackgroundColor:_8.BackgroundColor,BorderColor:_8.BorderColor,CssClass:_9,Style:_8.Style});ba=j.WithCustomFormContainer(_,_7);bb=m.$(m.$(b.Return(function(bc){return function(bd){return[bc,bd];};}),V),ba);be=b.Horizontal(bb);bf=k.get_Default();bg={$:1,$0:"totop"};bh=$.New(k,{Header:bf.Header,Padding:bf.Padding,Description:bf.Description,BackgroundColor:bf.BackgroundColor,BorderColor:bf.BorderColor,CssClass:bg,Style:bf.Style});bi=j.WithCustomFormContainer(bh,be);bj=function(bk){var bl,bm,bn,bo,bp,bq,br,bs,bI,bJ,bK,bL;bl=bk[0];bm=bk[1];bn=bl[1];bo=bl[0];bp=bm[0];bq=bm[1];br=b.Do();bs=br.Delay(function(){var bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF;bu=bn[0];bv=bn[1];bw=h.Sync("YC.Web:6",[bo,bp,bu,bv,bq]);if(bw.$==1){bz=bw.$1;bA=bw.$0;if(bA.$==1){bC=bA.$0;bB=[{$:1,$0:bC},n.Join("\n",bz)];}else{bB=[{$:0},n.Join("\n",bz)];}by=bB;}else{bD=bw.$0;by=[{$:0},bD];}bx=by;bE=bx[1];bF=bx[0];return br.Bind(f.OutputAreaControl(bE,"Output"),function(bG){return br.Bind(o.ShowImageControl(bF,bq,"canvas"),function(bH){return br.Return([bG,bH]);});});});bI=b.Horizontal(bs);bJ=k.get_Default();bK={$:1,$0:"totop"};bL=$.New(k,{Header:bJ.Header,Padding:bJ.Padding,Description:bJ.Description,BackgroundColor:bJ.BackgroundColor,BorderColor:bJ.BorderColor,CssClass:bK,Style:bJ.Style});return j.WithCustomFormContainer(bL,bI);};bM=b.Do();bN=bM.Delay(function(){return bM.Bind(bi,function(bP){return bM.Bind(bj(bP),function(bQ){return bM.Return([bP,bQ]);});});});return b.Vertical(bN);}),MainFormRun:function(){var bQ;bQ=i.ofArray([o.MainForm().Run(function(){return null;})]);return r.Tags().NewTag("div",bQ);},ShowImageControl:function(bS,bT,bU){var bV,bW,bX,bY,bZ,b0,b1,b2,b4,b5,b6,b7,b8,cf;bV=[bS,bT];if(bV[0].$==1){if(bV[1]){bZ=bV[0].$0;b0=s(bZ.edges.length);for(b1=0;b1<=bZ.edges.length-1;b1++){b2=function(b3){return b3.$==3?"U":b3.$==1?"C":b3.$==2?"G":"A";};b4=t.get(bZ.edges,b1);b5=b4[3];b6=b4[2];b7=b4[1];b8=b4[0];t.set(b0,b1,[b8,b7,b2(b6),b5]);}bY=b.OfElement(function(){var b_;b_=i.ofArray([u.Attr().NewAttr("id",bU)]);return f.Graph("Graph Visualization",b0,bZ.countOfVertex,r.Tags().NewTag("div",b_));});}else{bV[0].$0;bY=b.OfElement(function(){var ca;ca=i.ofArray([u.Attr().NewAttr("hidden","true")]);return r.Tags().NewTag("img",ca);});}bX=bY;}else{bX=bV[1]?b.OfElement(function(){var cc;cc=i.ofArray([u.Attr().NewAttr("hidden","true")]);return r.Tags().NewTag("img",cc);}):b.OfElement(function(){var ce;ce=i.ofArray([u.Attr().NewAttr("hidden","true")]);return r.Tags().NewTag("img",ce);});}bW=bX;cf=j.WithLabelAbove(bW);return j.WithFormContainer(cf);}},GraphParsingClient:{MainForm:$.Field(function(){var cg,ch,cn,co,cp,cq,cr,cs,ct,cF,cG,cH,cI,cJ,cK,cN,cO,cP,cQ,cR,cS,dQ,dR;cg=b.Do();ch=cg.Delay(function(){var cj,cl;cj=function(ck){return[ck,h.Sync("YC.Web:1",[{$:1},ck])];};cl=h.Sync("YC.Web:0",[{$:1}]);return cg.Bind(f.InputAreaControl("Grammar",i.map(cj,cl)),function(cm){return cg.Return(cm);});});cn=b.Vertical(ch);co=k.get_Default();cp={$:1,$0:"tomiddle"};cq=$.New(k,{Header:co.Header,Padding:co.Padding,Description:co.Description,BackgroundColor:co.BackgroundColor,BorderColor:co.BorderColor,CssClass:cp,Style:co.Style});cr=j.WithCustomFormContainer(cq,cn);cs=b.Do();ct=cs.Delay(function(){var cv,cx;cv=function(cw){return[cw,h.Sync("YC.Web:1",[{$:0},cw])];};cx=h.Sync("YC.Web:0",[{$:0}]);return cs.Bind(f.InputAreaControl("Graph",i.map(cv,cx)),function(cy){var cz,cA;cz=l.Checkbox(false);cA=j.WithTextLabel("Show formal subgraph",cz);return cs.Bind(j.WithLabelLeft(cA),function(cB){var cC,cD;cC=l.Checkbox(false);cD=j.WithTextLabel("Remove redundant nodes",cC);return cs.Bind(j.WithLabelLeft(cD),function(cE){return cs.Return([cy,cB,cE]);});});});});cF=b.Vertical(ct);cG=k.get_Default();cH={$:1,$0:"tomiddle"};cI=$.New(k,{Header:cG.Header,Padding:cG.Padding,Description:cG.Description,BackgroundColor:cG.BackgroundColor,BorderColor:cG.BorderColor,CssClass:cH,Style:cG.Style});cJ=j.WithCustomFormContainer(cI,cF);cK=m.$(m.$(b.Return(function(cL){return function(cM){return[cL,cM];};}),cr),cJ);cN=b.Horizontal(cK);cO=k.get_Default();cP={$:1,$0:"totop"};cQ=$.New(k,{Header:cO.Header,Padding:cO.Padding,Description:cO.Description,BackgroundColor:cO.BackgroundColor,BorderColor:cO.BorderColor,CssClass:cP,Style:cO.Style});cR=j.WithCustomFormContainer(cQ,cN);cS=function(cT){var cU,cV,cW,cX,cY,cZ,c0,c$,da,db,dc,df,dg,dh,di,dj,dk,dl,dm,dn,_do,ds,dt,dL,dM;cU=cT[0];cV=cT[1];cW=cV[1];cX=cV[2];cY=cV[0];cZ=b.Do();c0=cZ.Delay(function(){var c2,c3,c4,c5,c8;c2=h.Sync("YC.Web:2",[cU,cY,cW,cX]);if(c2.$==0){c4=c2.$0;c5=c2.$1;c3=cZ.Bind(f.ShowGraphImageControl("Graph Visualization",c5,"canvas1"),function(c6){return cZ.Bind(v.ShowTreeImageControl("SPPF",c4,"canvas2"),function(c7){return cZ.Return([c6,c7]);});});}else{c8=c2.$0;c3=cZ.Bind(f.OutputAreaControl("Error:"+c8,"Graph Visualization"),function(c9){return cZ.Bind(f.OutputAreaControl("Error:"+c8,"SPPF"),function(c_){return cZ.Return([c9,c_]);});});}return c3;});c$=j.WithFormContainer(c0);da=b.Horizontal(c$);db=b.Do();dc=db.Delay(function(){return db.Bind(f.RangeControl("Vertices","Initial","Final"),function(de){return db.Return(de);});});df=w.get_Default();dg=$.New(w,{Label:{$:1,$0:"FIND PATH"},Style:{$:1,$0:f.buttonStyle()},Class:df.Class});dh=j.WithCustomSubmitButton(dg,dc);di=b.Horizontal(dh);dj=k.get_Default();dk={$:1,$0:"todown"};dl=$.New(k,{Header:dj.Header,Padding:dj.Padding,Description:dj.Description,BackgroundColor:dj.BackgroundColor,BorderColor:dj.BorderColor,CssClass:dk,Style:dj.Style});dm=j.WithCustomFormContainer(dl,di);dn=b.Do();_do=dn.Delay(function(){return dn.Bind(da,function(dq){return dn.Bind(dm,function(dr){return dn.Return([dq,dr]);});});});ds=b.Vertical(_do);dt=function(du){var dv,dw,dK;dv=b.Do();dw=dv.Delay(function(){var dy,dz,dA,dB,dC,dF;if((du[0]<du[1]?du[0]>=0:false)?du[1]>=0:false){dz=h.Sync("YC.Web:3",[cU,cY,cX,du[0],du[1]]);if(dz.$==0){dB=dz.$0;dC=dz.$1;dA=dv.Bind(f.ShowGraphImageControl("Path",dC,"canvas3"),function(dD){return dv.Bind(v.ShowTreeImageControl("SPPF Path",dB,"canvas4"),function(dE){return dv.Return([dD,dE]);});});}else{dF=dz.$0;dA=dv.Bind(f.OutputAreaControl("Error:"+dF,"Path"),function(dG){return dv.Bind(f.OutputAreaControl("Error:"+dF,"SPPF Path"),function(dH){return dv.Return([dG,dH]);});});}dy=dA;}else{dy=dv.Bind(f.OutputAreaControl("Error: Incorrect range","Path"),function(dI){return dv.Bind(f.OutputAreaControl("Error: Incorrect range","SPPF Path"),function(dJ){return dv.Return([dI,dJ]);});});}return dy;});dK=j.WithFormContainer(dw);return b.Horizontal(dK);};dL=b.Do();dM=dL.Delay(function(){return dL.Bind(ds,function(dO){return dL.Bind(dt(dO[1]),function(dP){return dL.Return([dO,dP]);});});});return b.Vertical(dM);};dQ=b.Do();dR=dQ.Delay(function(){return dQ.Bind(cR,function(dT){return dQ.Bind(cS(dT),function(dU){return dQ.Return(dU);});});});return b.Vertical(dR);}),MainFormRun:function(){var dV,dX,dY;dV=v.MainForm().Run(function(){return null;});dY=i.ofArray([dV]);dX=i.ofArray([x.add(r.Tags().NewTag("div",dY),i.ofArray([u.Attr().NewAttr("align","center")]))]);return r.Tags().NewTag("div",dX);},SPPF:function(dZ,d0,d1,d2){var d3,d4,d5,d6,d7,d_,eb;d3="height: "+f.formH()+"; width: "+f.formW();d4=i.ofArray([r.Tags().text(dZ),u.Attr().NewAttr("style",d3)]);d5=r.Tags().NewTag("button",d4);d7=function(){return function(){d2["HtmlProvider@33"].Clear(d2.get_Body());return((y.draw.call(null,((y.createTree.call(null,d0))(d1))(d2.get_Id())))(d2.get_Id()))(f.graphSize());};};z.Events().OnClick(d7,d2);d6=d2;d_=function(){return function(){((y.draw.call(null,((y.createTree.call(null,d0))(d1))(d2.get_Id())))(d2.get_Id()))(f.graphSize());return d5["HtmlProvider@33"].Remove(d5.get_Body());};};z.Events().OnClick(d_,d5);eb=i.ofArray([d2,d5]);return r.Tags().NewTag("div",eb);},ShowTreeImageControl:function(ec,ed,ee){var ef,ei,ej;ef=b.OfElement(function(){var eh;eh=i.ofArray([u.Attr().NewAttr("id",ee)]);return v.SPPF(ec,ed.edges,ed.countOfVertex,r.Tags().NewTag("div",eh));});ei=j.WithTextLabel(ec,ef);ej=j.WithLabelAbove(ei);return j.WithFormContainer(ej);}},WebComponents:{AlgorithmsComponents:{ChooseDefaultControl:function(ek){var el,em,en;el=f.setFormWidth(0.15);em=f.setFormWidth(0.02);en=b.Do();return en.Delay(function(){var ep,eq,er,es,et,eu;ep=l.Select(1,$.New(A,{$:1,$0:["",""],$1:ek}));eq=j.WithTextLabel("ChooseDefault",ep);er=[em,el];es=er[0];et=er[1];eu=f.setFormSize(es,et,"select",eq);return en.Bind(j.WithFormContainer(eu),function(ev){return en.Return(ev);});});},FileControl:$.Field(function(){var ew,eK;ew=function(){var ey,ez,eA,eB,eH,eI;ey=C.New();ez=i.ofArray([u.Attr().NewAttr("type","file"),u.Attr().NewAttr("accept","text/*")]);eA=r.Tags().NewTag("input",ez);eB=function(eC){return function(){var eE,eF;eE=eC.Dom.files.item(0);eF=new D();eF.readAsText(eE);return eF.addEventListener("load",function(){return ey.event.Trigger($.New(H,{$:0,$0:eF.result}));},true);};};z.Events().OnChange(eB,eA);eH=eA;eI=function(){eH.set_Value("");return ey.event.Trigger($.New(H,{$:0,$0:""}));};return[eH,eI,ey.event];};eK=b.BuildFormlet(ew);return b.InitWith("",eK);}),Graph:function(eL,eM,eN,eO){var eP,eQ,eR,eS,eV,eY;eP="height: "+f.formH()+"; width: "+f.formW();eQ=i.ofArray([r.Tags().text(eL),u.Attr().NewAttr("style",eP)]);eR=r.Tags().NewTag("button",eQ);eS=function(){return function(){eO["HtmlProvider@33"].Clear(eO.get_Body());return((y.draw.call(null,((y.createGraph.call(null,eM))(eN))(eO.get_Id())))(eO.get_Id()))(f.graphSize());};};z.Events().OnClick(eS,eO);eV=function(){return function(){((y.draw.call(null,((y.createGraph.call(null,eM))(eN))(eO.get_Id())))(eO.get_Id()))(f.graphSize());return eR["HtmlProvider@33"].Remove(eR.get_Body());};};z.Events().OnClick(eV,eR);eY=i.ofArray([eO,eR]);return r.Tags().NewTag("div",eY);},InputAreaControl:function(eZ,e0){var e1,e2,fi,fj;e1=b.Do();e2=e1.Delay(function(){var e4,e5;e4=b.Do();e5=e4.Delay(function(){return e4.Bind(f.ChooseDefaultControl(e0),function(e7){return e4.Bind(f.FileControl(),function(e8){return e4.Return([e7,e8]);});});});return e1.Bind(b.Horizontal(e5),function(e9){var e_,e$,fa,fb,fc,fd,fe,ff,fg;e_=e9[1];e$=e9[0];fa=e_===""?e$:e_;fb=l.TextArea(fa);fc=j.WithTextLabel(eZ,fb);fd=j.WithLabelAbove(fc);fe=[f.formH(),f.formW()];ff=fe[0];fg=fe[1];return e1.Bind(f.setFormSize(ff,fg,"textarea",fd),function(fh){return e1.Return(fh);});});});fi=b.FlipBody(e2);fj=b.Vertical(fi);return j.WithFormContainer(fj);},OutputAreaControl:function(fk,fl){var fm,fn;fm=b.Do();fn=fm.Delay(function(){var fp,fs,ft,fu,fv,fw;fp=b.OfElement(function(){var fr;fr=i.ofArray([u.Attr().NewAttr("readonly","readonly"),r.Tags().text(fk)]);return r.Tags().NewTag("textarea",fr);});fs=j.WithTextLabel(fl,fp);ft=j.WithLabelAbove(fs);fu=[f.formH(),f.formW()];fv=fu[0];fw=fu[1];return fm.Bind(f.setFormSize(fv,fw,"textarea",ft),function(fx){return fm.Return(fx);});});return j.WithFormContainer(fn);},RangeControl:function(fy,fz,fA){var fB,fC,fD,fG,fO,fW,fX,fY;fB=$$.String(+f.screenHeight()*0.16)+"px";fC=$$.String(+f.screenHeight()*0.04)+"px";fG=b.Do();fO=b.Do();fD=m.$(m.$(b.Return(function(fE){return function(fF){return[fE<<0,fF<<0];};}),fG.Delay(function(){var fI,fJ,fK,fL,fM;fI=l.Input("");fJ=j.WithTextLabel(fz,fI);fK=[fC,fB];fL=fK[0];fM=fK[1];return fG.Bind(f.setFormSize(fL,fM,"input",fJ),function(fN){return fG.Return(fN);});})),fO.Delay(function(){var fQ,fR,fS,fT,fU;fQ=l.Input("");fR=j.WithTextLabel(fA,fQ);fS=[fC,fB];fT=fS[0];fU=fS[1];return fO.Bind(f.setFormSize(fT,fU,"input",fR),function(fV){return fO.Return(fV);});}));fW=b.Horizontal(fD);fX=j.WithTextLabel(fy,fW);fY=j.WithLabelAbove(fX);return j.WithFormContainer(fY);},ShowGraphImageControl:function(fZ,f0,f1){var f2,f5,f6;f2=b.OfElement(function(){var f4;f4=i.ofArray([u.Attr().NewAttr("id",f1)]);return f.Graph(fZ,f0.edges,f0.countOfVertex,r.Tags().NewTag("div",f4));});f5=j.WithTextLabel(fZ,f2);f6=j.WithLabelAbove(f5);return j.WithFormContainer(f6);},buttonStyle:$.Field(function(){return"padding-top: 0px;\r\n                        background-color: #FF69B4; \r\n                        border-width: 3px; \r\n                        font-weight: bold;\r\n                        border-color: #000000; \r\n                        border-radius: 10px; \r\n                        color: #000000; \r\n                        height: "+f.setFormHeight(0.05)+"; \r\n                        width: "+f.setFormWidth(0.06)+"; \r\n                        font-size:"+f.setFormHeight(0.02);}),formH:$.Field(function(){return f.setFormHeight(0.15);}),formW:$.Field(function(){return f.setFormWidth(0.4);}),graphSize:$.Field(function(){return n.Replace(f.setFormWidth(0.4),"px","")<<0;}),screenHeight:$.Field(function(){return I("html").height();}),screenWidth:$.Field(function(){return I("html").width();}),setFormHeight:function(f7){return $$.String(+f.screenHeight()*f7)+"px";},setFormSize:function(f8,f9,f_,f$){var ga;ga=function(gb){I(gb.Dom.querySelector(f_)).css("height",f8).css("width",f9);return gb;};return b.MapElement(ga,f$);},setFormWidth:function(gc){return $$.String(+f.screenWidth()*gc)+"px";}}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Formlet);c=$.Safe($$.YC);d=$.Safe(c.Web);e=$.Safe(d.WebComponents);f=$.Safe(e.AlgorithmsComponents);g=$.Safe($$.WebSharper.Remoting);h=$.Safe(g.AjaxRemotingProvider);i=$.Safe($$.WebSharper.List);j=$.Safe(a.Enhance);k=$.Safe(j.FormContainerConfiguration);l=$.Safe(a.Controls);m=$.Safe(a.Data);n=$.Safe($$.WebSharper.Strings);o=$.Safe(d.BioGraphClient);p=$.Safe($$.WebSharper.Html);q=$.Safe(p.Client);r=$.Safe(q.Tags);s=$.Safe($$.Array);t=$.Safe($$.WebSharper.Arrays);u=$.Safe(q.Attr);v=$.Safe(d.GraphParsingClient);w=$.Safe(j.FormButtonConfiguration);x=$.Safe(q.Operators);y=$.Safe($$.window);z=$.Safe(q.EventsPervasives);A=$.Safe(i.T);B=$.Safe($$.WebSharper.Control);C=$.Safe(B.FSharpEvent);D=$.Safe($$.FileReader);E=$.Safe($$.IntelliFactory);F=$.Safe(E.Formlets);G=$.Safe(F.Base);H=$.Safe(G.Result);return I=$.Safe($$.jQuery);});$.OnLoad(function(){f.screenWidth();f.screenHeight();f.graphSize();f.formW();f.formH();f.buttonStyle();f.FileControl();v.MainForm();o.MainForm();return;});}());
